(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{I2cP:function(t,n,o){"use strict";o.r(n),o.d(n,"TopicPageModule",function(){return C});var e=o("ofXK"),i=o("3Pt+"),c=o("TEn/"),r=o("tyNb"),s=o("1AJp"),a=o("vkgz"),b=o("fXoL"),l=o("P7CE"),d=o("npAJ");function p(t,n){1&t&&(b.Ob(0,"ion-col",7),b.Kb(1,"img",24),b.Nb())}const g=function(t){return["/profile",t]},h=function(t){return["/post",t]};function f(t,n){if(1&t&&(b.Mb(0),b.Ob(1,"ion-card"),b.Ob(2,"ion-grid",10),b.Ob(3,"ion-row"),b.Ob(4,"ion-col",16),b.Kb(5,"ion-icon",17),b.lc(6),b.Kb(7,"hr"),b.Kb(8,"ion-icon",18),b.lc(9),b.Nb(),b.Ob(10,"ion-col",19),b.Ob(11,"div",20),b.lc(12,"Posted by u/"),b.Ob(13,"a",21),b.lc(14),b.Nb(),b.lc(15),b.Nb(),b.Ob(16,"h3",22),b.Ob(17,"a",21),b.lc(18),b.Nb(),b.Nb(),b.Nb(),b.kc(19,p,2,0,"ion-col",23),b.Nb(),b.Nb(),b.Nb(),b.Lb()),2&t){const t=n.$implicit;b.zb(6),b.nc(" ",t.likes," "),b.zb(3),b.nc(" ",t.dislikes," "),b.zb(4),b.dc("routerLink",b.ec(8,g,t.user.id)),b.zb(1),b.mc(t.user.username),b.zb(1),b.nc(" - ",t.date,""),b.zb(2),b.dc("routerLink",b.ec(10,h,t.id)),b.zb(1),b.mc(t.title),b.zb(1),b.dc("ngIf",2==t.type)}}const u=function(t){return["/create/post/",t]},O=[{path:"",component:(()=>{class t{constructor(t,n,o,e,i,c){this.route=t,this.feedService=n,this.authService=o,this.navCtrl=e,this.loadingCtrl=i,this.alertCtrl=c,this.topicInfos={id:0,title:"",description:""},this.listOfPosts=[],this.joinbtn="Join",this.joined=!1,this.isAuthenticated=!1}ngOnInit(){this.authService.autoLogin().subscribe(t=>{this.isAuthenticated=t,console.log(t)}),this.topicId=this.route.snapshot.paramMap.get("id"),this.loadingCtrl.create({spinner:"crescent"}).then(t=>{t.present(),this.feedService.getTopicInfo(this.topicId).pipe(Object(a.a)(n=>{console.log(n),n.success?(n.topic.title=this.titleCaseWord(n.topic.title),this.topicInfos=n.topic,this.isAuthenticated&&n.joined&&(this.joined=!0,this.joinbtn="joined"),n.posts.forEach(t=>{t.title=this.titleCaseWord(t.title)}),this.listOfPosts=n.posts.sort((t,n)=>t.likes>n.likes?-1:t.likes<n.likes?1:0),t.dismiss()):(t.dismiss(),this.navCtrl.navigateRoot("/error/notfound"))})).subscribe()})}titleCaseWord(t){return t?t[0].toUpperCase()+t.substr(1):t}getDesc(){if(this.topicInfos.description)return this.topicInfos.description}joinTopic(){this.isAuthenticated?(this.joinbtn="Joining",this.loadingCtrl.create({spinner:"crescent"}).then(t=>{t.present(),this.feedService.joinTopic(this.topicId).pipe(Object(a.a)(n=>{console.log(n),n.success?(this.joined=!0,this.joinbtn="joined",t.dismiss()):(t.dismiss(),this.alertCtrl.create({header:"Something wrong",message:"Please try again later ...",buttons:["Ok"]}).then(t=>{t.present()}))},n=>{console.log(n),t.dismiss(),this.alertCtrl.create({header:"An error has occured",message:n.error.message?n.error.message:"Failed to communicate with server. Please try again later ...",buttons:["Ok"]}).then(t=>{t.present()})})).subscribe(),t.dismiss(),this.joined=!0,this.joinbtn="Joined"})):this.navCtrl.navigateRoot("/login")}}return t.\u0275fac=function(n){return new(n||t)(b.Jb(r.a),b.Jb(l.a),b.Jb(d.a),b.Jb(c.H),b.Jb(c.G),b.Jb(c.a))},t.\u0275cmp=b.Db({type:t,selectors:[["app-topic"]],decls:33,vars:9,consts:[[3,"fullscreen"],[1,"backgrnd"],[1,"imgContainer"],["offset","2","size","2"],["src","../../../assets/topic.png","alt","",1,"image"],["size","4"],[1,"topicTitle"],["size","2"],["expand","block","fill","clear",1,"postbtn",3,"disabled","click"],["size","6","offset","2",1,"postscards"],["fixed",""],[4,"ngFor","ngForOf"],[1,"widget","ion-align-items-center"],[1,"about"],[1,"desc"],["fill","clear",1,"postcrt",3,"routerLink"],["size","1",1,"likescase","ion-text-center"],["name","heart-outline"],["name","heart-dislike-outline"],["size","9"],[1,"postedby"],[3,"routerLink"],[1,"postlink"],["size","2",4,"ngIf"],["src","../../../assets/event-invitation-redimg.jpg",1,"thumbnail"]],template:function(t,n){1&t&&(b.Ob(0,"ion-header"),b.Kb(1,"ion-toolbar"),b.Nb(),b.Ob(2,"ion-content",0),b.Kb(3,"div",1),b.Ob(4,"div",2),b.Ob(5,"ion-grid"),b.Ob(6,"ion-row"),b.Ob(7,"ion-col",3),b.Kb(8,"img",4),b.Nb(),b.Ob(9,"ion-col",5),b.Ob(10,"div",6),b.lc(11),b.Nb(),b.Nb(),b.Ob(12,"ion-col",7),b.Ob(13,"ion-button",8),b.Wb("click",function(){return n.joinTopic()}),b.lc(14),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(15,"ion-grid"),b.Ob(16,"ion-row"),b.Ob(17,"ion-col",9),b.Ob(18,"ion-grid",10),b.Ob(19,"ion-row"),b.Ob(20,"ion-col"),b.kc(21,f,20,12,"ng-container",11),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(22,"ion-col",7),b.Ob(23,"div",12),b.Ob(24,"h4",13),b.lc(25,"About the topic !"),b.Nb(),b.Kb(26,"hr"),b.Ob(27,"p",14),b.lc(28),b.Nb(),b.Kb(29,"hr"),b.Ob(30,"ion-button",15),b.lc(31," Create Post "),b.Nb(),b.Kb(32,"hr"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&t&&(b.zb(2),b.dc("fullscreen",!0),b.zb(9),b.nc(" ",n.topicInfos.title," "),b.zb(2),b.dc("disabled",n.joined),b.zb(1),b.nc(" ",n.joinbtn," "),b.zb(7),b.dc("ngForOf",n.listOfPosts),b.zb(7),b.nc(" ",n.getDesc()," "),b.zb(2),b.dc("routerLink",b.ec(7,u,n.topicId)))},directives:[c.p,c.D,c.m,c.o,c.x,c.l,c.f,e.h,c.J,r.h,c.h,c.q,r.i,e.i],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-content[_ngcontent-%COMP%]{--ion-background-color:#f2f2f2}ion-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #bbb;margin:0 0 0 10px;border-radius:0;text-decoration:none}h2.topics[_ngcontent-%COMP%]{margin-left:20px;border-bottom:1px solid #bbb;color:#adadad}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#c58f8f;color:#fff;font-family:Courier New,Courier,sans-serif}ion-title[_ngcontent-%COMP%]{font-size:17px}.widget[_ngcontent-%COMP%]{float:left;width:100%;background-color:#fff;border-left:1px solid #e4e4e4;border-right:1px solid #e4e4e4;border-bottom:1px solid #e4e4e4;margin-bottom:20px;-ms-box-shadow:0 2px #e4e4e4;-o-box-shadow:0 2px #e4e4e4;box-shadow:0 2px #e4e4e4;text-align:center}.backgrnd[_ngcontent-%COMP%]{height:80px;width:100%;background-color:#c58f8f}.image[_ngcontent-%COMP%]{position:absolute;height:100px;width:100px;border-radius:50%;left:50%;transform:translate(-30%,-60%)}.imgContainer[_ngcontent-%COMP%]{min-height:70px;width:100%;background-color:#fff}.topicTitle[_ngcontent-%COMP%]{padding-top:10px;font:normal x-small verdana,arial,helvetica,sans-serif;color:#772727;font-size:28px;font-weight:500;line-height:32px;overflow:hidden}.likescase[_ngcontent-%COMP%]{background-color:#f2f2f2;padding-top:10px}ion-card[_ngcontent-%COMP%]{margin-top:10px}a[_ngcontent-%COMP%]{--color:#c58f8f}.postedby[_ngcontent-%COMP%]{padding:0 0 0 15px}.postedby[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#737373;text-decoration:none}h3.postlink[_ngcontent-%COMP%]{padding:0 0 5px 15px}h3.postlink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#353535;text-decoration:none}h6.topiclink[_ngcontent-%COMP%]{padding:5px 0 0 15px;margin:0}h6.topiclink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#737373;text-decoration:none}img.thumbnail[_ngcontent-%COMP%]{border-radius:50%}ion-col.postscards[_ngcontent-%COMP%]{--ion-background-color:#fff}.about[_ngcontent-%COMP%]{background-color:#c58f8f;margin:0;padding-top:10px;padding-bottom:10px;color:#fff}ion-button.postbtn[_ngcontent-%COMP%]{background-color:#e06b56;color:#fff;font-weight:700;border-radius:10px;margin-top:5%}p.desc[_ngcontent-%COMP%]{border-bottom:1px solid f2f2f2}ion-button.postcrt[_ngcontent-%COMP%]{width:75%;background-color:#e06b56;color:#fff;font-weight:700;border-radius:15px}"]}),t})()},{path:"create",loadChildren:()=>o.e(3).then(o.bind(null,"b5JN")).then(t=>t.CrtopicPageModule),canActivate:[s.a]}];let m=(()=>{class t{}return t.\u0275mod=b.Hb({type:t}),t.\u0275inj=b.Gb({factory:function(n){return new(n||t)},imports:[[r.j.forChild(O)],r.j]}),t})(),C=(()=>{class t{}return t.\u0275mod=b.Hb({type:t}),t.\u0275inj=b.Gb({factory:function(n){return new(n||t)},imports:[[e.b,i.e,c.E,m]]}),t})()}}]);